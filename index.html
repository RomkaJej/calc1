<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MLM-калькулятор дохода</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>

<body class="bg-green-600">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    function MLMCalculator() {
      const [lines, setLines] = useState([1, 0, 0, 0, 0, 0, 0, 0, 0, 0]); // Первая линия всегда с 1
      const [pvPerUser, setPvPerUser] = useState(90); // PV за одного человека
      const [rank, setRank] = useState(1); // Ранг
      const [isNewbiePeriod, setIsNewbiePeriod] = useState(false); // Новичковый период

      // Проценты для каждой линии
      const linePercents = [0.1, 0.08, 0.06, 0.05, 0.04, 0.03, 0.02, 0.01, 0.005, 0.005];

      // Рассчитываем бонусы для каждой линии
      const getLineBonus = (users, percent) => users * pvPerUser * percent;

      // Рассчитываем общий бонус
      const calculateBonus = () => {
        let totalBonus = 0;
        for (let i = 0; i < lines.length; i++) {
          totalBonus += getLineBonus(lines[i], linePercents[i]);
        }
        return totalBonus;
      };

      const totalEur = calculateBonus();

      // Функция для изменения количества участников в каждой линии
      const handleLineChange = (index, value) => {
        const updatedLines = [...lines];
        updatedLines[index] = value;
        setLines(updatedLines);
      };

      // Рассчитываем ранг на основе линий
      const calculateRank = () => {
        let maxRank = 0;
        for (let i = 0; i < lines.length; i++) {
          if (lines[i] > 0) {
            maxRank = i + 1;
          }
        }
        return maxRank;
      };

      const calculatedRank = calculateRank();

      useEffect(() => {
        setRank(calculatedRank);
      }, [lines]);

      return (
        <div className="max-w-lg mx-auto mt-10 p-8 bg-white rounded-2xl shadow-lg space-y-6">
          <div className="flex justify-center items-center mb-6">
            <img
              src="https://bfc24.com/_next/image?url=https%3A%2F%2Fbfc24.com%2Fapi%2Ffiles%2FLayer_1.png&w=3840&q=75"
              alt="Logo"
              className="h-12 w-auto"
            />
          </div>

          <h1 className="text-3xl font-bold text-center text-gray-800">MLM-калькулятор дохода</h1>

          <div className="space-y-4 mt-6">
            <label className="block text-gray-600">Текущий ранг (1-10):</label>
            <input
              type="text"
              value={calculatedRank}
              readOnly
              className="w-full bg-gray-200 p-3 rounded-lg text-center text-gray-800"
            />
            <p className="text-center">Ранг: {calculatedRank}</p>

            {/* Количество участников для каждой линии */}
            {lines.map((line, index) => (
              <div key={index}>
                <label>{`Кол-во Club members в ${index + 1}-й линии:`}</label>
                <input
                  type="number"
                  value={line}
                  onChange={(e) => handleLineChange(index, +e.target.value)}
                  className="input-field border p-3 w-full rounded-lg focus:ring-2 focus:ring-green-400"
                />
              </div>
            ))}

            <label>Сколько PV на одного человека:</label>
            <input
              type="number"
              value={pvPerUser}
              onChange={(e) => setPvPerUser(+e.target.value)}
              className="input-field border p-3 w-full rounded-lg focus:ring-2 focus:ring-green-400"
            />

            <label className="flex items-center gap-2">
              <input type="checkbox" checked={isNewbiePeriod} onChange={() => setIsNewbiePeriod(!isNewbiePeriod)} />
              Я в новичковом периоде
            </label>
          </div>

          <div className="p-4 bg-gray-100 rounded-xl text-lg space-y-3 shadow-lg">
            <p><strong className="text-blue-600">Структурный бонус:</strong> €{totalEur.toFixed(2)}</p>
          </div>
        </div>
      );
    }

    ReactDOM.render(<MLMCalculator />, document.getElementById('root'));
  </script>

</body>
</html>
